import{a as M,d as g,h as u}from"./chunk-XP46ZQI7.js";import{b as P,e as E,h as R,i as w,j as N,l as F}from"./chunk-C4CLRZFR.js";import{$a as a,Ba as S,Cb as C,Db as _,Ga as v,Gb as G,Ka as h,Ra as p,Ta as e,Ua as i,Xa as y,Ya as x,ab as l,bb as T,db as I,e as c,eb as b,fb as A,xa as n}from"./chunk-WRYOPP3C.js";function $(m,s){if(m&1&&(e(0,"option",7),a(1),i()),m&2){let t=s.$implicit;p("value",t.id),n(),l(t.name)}}function j(m,s){if(m&1&&(e(0,"div",8)(1,"h5",1),a(2),i(),e(3,"ul",9)(4,"li",10),a(5,"Games Played: "),e(6,"strong"),a(7),i()(),e(8,"li",10),a(9,"Total Points: "),e(10,"strong"),a(11),i()(),e(12,"li",10),a(13,"Total Assists: "),e(14,"strong"),a(15),i()(),e(16,"li",10),a(17,"Total Rebounds: "),e(18,"strong"),a(19),i()(),e(20,"li",10),a(21,"Avg Points/Game: "),e(22,"strong"),a(23),i()(),e(24,"li",10),a(25,"Avg Assists/Game: "),e(26,"strong"),a(27),i()(),e(28,"li",10),a(29,"Avg Rebounds/Game: "),e(30,"strong"),a(31),i()()()()),m&2){let t=x();n(2),T("Stats for ",t.selectedTeamName,""),n(5),l(t.totalGames),n(4),l(t.totalPoints),n(4),l(t.totalAssists),n(4),l(t.totalRebounds),n(4),l(t.avgPoints),n(4),l(t.avgAssists),n(4),l(t.avgRebounds)}}var O=class m{constructor(s){this.firestore=s}teams=[];selectedTeamId="";totalGames=0;totalPoints=0;totalAssists=0;totalRebounds=0;ngOnInit(){return c(this,null,function*(){yield this.loadTeams()})}loadTeams(){return c(this,null,function*(){let s=g(this.firestore,"teams"),t=yield u(s);this.teams=t.docs.map(o=>({id:o.id,name:o.data().name||"Unnamed"}))})}onTeamSelect(){return c(this,null,function*(){if(!this.selectedTeamId)return;this.totalGames=0,this.totalPoints=0,this.totalAssists=0,this.totalRebounds=0;let s=g(this.firestore,`teams/${this.selectedTeamId}/games`),o=(yield u(s)).docs.map(r=>({id:r.id,date:r.data().date}));this.totalGames=o.length;for(let r of o){let d=g(this.firestore,`teams/${this.selectedTeamId}/games/${r.id}/stats`),D=yield u(d);for(let W of D.docs){let f=W.data();this.totalPoints+=f.points||0,this.totalAssists+=f.assists||0,this.totalRebounds+=f.rebounds||0}}})}get avgPoints(){return this.totalGames?Math.round(this.totalPoints/this.totalGames):0}get avgAssists(){return this.totalGames?Math.round(this.totalAssists/this.totalGames):0}get avgRebounds(){return this.totalGames?Math.round(this.totalRebounds/this.totalGames):0}get selectedTeamName(){let s=this.teams.find(t=>t.id===this.selectedTeamId);return s?s.name:""}static \u0275fac=function(t){return new(t||m)(S(M))};static \u0275cmp=v({type:m,selectors:[["app-analytics"]],decls:11,vars:3,consts:[[1,"container","mt-4"],[1,"mb-3"],["for","teamSelect",1,"form-label"],["id","teamSelect",1,"form-select",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","card shadow p-4",4,"ngIf"],[3,"value"],[1,"card","shadow","p-4"],[1,"list-group"],[1,"list-group-item"]],template:function(t,o){t&1&&(e(0,"div",0)(1,"h3"),a(2,"Team Analytics"),i(),e(3,"div",1)(4,"label",2),a(5,"Select Team"),i(),e(6,"select",3),A("ngModelChange",function(d){return b(o.selectedTeamId,d)||(o.selectedTeamId=d),d}),y("change",function(){return o.onTeamSelect()}),e(7,"option",4),a(8,"-- Choose a Team --"),i(),h(9,$,2,2,"option",5),i()(),h(10,j,32,8,"div",6),i()),t&2&&(n(6),I("ngModel",o.selectedTeamId),n(3),p("ngForOf",o.teams),n(),p("ngIf",o.selectedTeamId))},dependencies:[G,C,_,F,w,N,R,P,E],styles:["[_nghost-%COMP%]{display:block;padding-top:70px;position:relative;z-index:1}"]})};export{O as AnalyticsComponent};
