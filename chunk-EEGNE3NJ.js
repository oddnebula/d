import{a as F,c as W,d as T,e as q,f as M,h as v,j as S,k as I,l as E,n as B,o as O}from"./chunk-XP46ZQI7.js";import{a as L,b as z,c as A,d as Q,e as j,f as G,g as Z,k as H,l as U}from"./chunk-C4CLRZFR.js";import{$a as s,Ba as P,Cb as V,Db as R,Ga as D,Gb as k,Ka as b,Ra as h,Ta as a,Ua as r,Va as K,Wa as C,Xa as _,Ya as d,_a as X,a as w,aa as c,ab as N,ba as p,bb as x,db as g,e as u,eb as f,fb as y,kb as Y,xa as m}from"./chunk-WRYOPP3C.js";function re(l,n){if(l&1){let e=C();a(0,"div")(1,"div",17)(2,"div",6)(3,"input",18),y("ngModelChange",function(i){c(e);let o=d(2);return f(o.editName,i)||(o.editName=i),p(i)}),r()(),a(4,"div",6)(5,"input",19),y("ngModelChange",function(i){c(e);let o=d(2);return f(o.editPosition,i)||(o.editPosition=i),p(i)}),r()(),a(6,"div",9)(7,"input",20),y("ngModelChange",function(i){c(e);let o=d(2);return f(o.editNumber,i)||(o.editNumber=i),p(i)}),r()(),a(8,"div",21)(9,"button",22),_("click",function(){c(e);let i=d(2);return p(i.updatePlayer())}),s(10,"\u{1F4BE}"),r(),a(11,"button",23),_("click",function(){c(e);let i=d(2);return p(i.cancelEdit())}),s(12,"\u2716"),r()()()()}if(l&2){let e=d(2);m(3),g("ngModel",e.editName),m(2),g("ngModel",e.editPosition),m(2),g("ngModel",e.editNumber)}}function ae(l,n){if(l&1){let e=C();a(0,"div",24)(1,"div"),s(2),a(3,"strong"),s(4),r(),s(5),r(),a(6,"div",25)(7,"button",26),_("click",function(){c(e);let i=d().$implicit,o=d();return p(o.startEdit(i))}),s(8,"\u270F\uFE0F"),r(),a(9,"button",27),_("click",function(){c(e);let i=d().$implicit,o=d();return p(o.deletePlayer(i.id))}),s(10,"\u{1F5D1}"),r()()()}if(l&2){let e=d().$implicit;m(2),x(" #",e.number," \u2014 "),m(2),N(e.name),m(),x(" (",e.position,") ")}}function se(l,n){if(l&1&&(a(0,"li",15),b(1,re,13,3,"div",16)(2,ae,11,3,"ng-template",null,0,Y),r()),l&2){let e=n.$implicit,t=X(3),i=d();m(),h("ngIf",i.editModeId===e.id)("ngIfElse",t)}}function le(l,n){if(l&1){let e=C();a(0,"div",28)(1,"button",29),_("click",function(){c(e);let i=d();return p(i.loadNextPlayers())}),s(2,"Load More Players"),r()()}}var J=class l{constructor(n){this.firestore=n}teamId;players=[];lastPlayerDoc=null;playerPageSize=5;name="";position="";number=null;editModeId=null;editName="";editPosition="";editNumber=null;ngOnInit(){return u(this,null,function*(){yield this.loadPlayers()})}loadPlayers(){return u(this,null,function*(){let n=T(this.firestore,`teams/${this.teamId}/roster`),e=E(n,I("name"),S(this.playerPageSize)),t=yield v(e);this.players=t.docs.map(i=>w({id:i.id},i.data())),this.lastPlayerDoc=t.docs[t.docs.length-1]||null})}loadNextPlayers(){return u(this,null,function*(){if(!this.lastPlayerDoc)return;let n=T(this.firestore,`teams/${this.teamId}/roster`),e=E(n,I("name"),B(this.lastPlayerDoc),S(this.playerPageSize)),t=yield v(e),i=t.docs.map(o=>w({id:o.id},o.data()));this.players=[...this.players,...i],this.lastPlayerDoc=t.docs[t.docs.length-1]||null})}addPlayer(){return u(this,null,function*(){if(!this.name||!this.position||this.number===null)return;let n={name:this.name,position:this.position,number:this.number},e=T(this.firestore,`teams/${this.teamId}/roster`);yield W(e,n),this.name="",this.position="",this.number=null,yield this.loadPlayers()})}deletePlayer(n){return u(this,null,function*(){let e=M(this.firestore,`teams/${this.teamId}/roster/${n}`);yield q(e),yield this.loadPlayers()})}startEdit(n){this.editModeId=n.id,this.editName=n.name,this.editPosition=n.position,this.editNumber=n.number}cancelEdit(){this.editModeId=null,this.editName="",this.editPosition="",this.editNumber=null}updatePlayer(){return u(this,null,function*(){if(!this.editModeId)return;let n=M(this.firestore,`teams/${this.teamId}/roster/${this.editModeId}`);yield O(n,{name:this.editName,position:this.editPosition,number:this.editNumber}),this.cancelEdit(),yield this.loadPlayers()})}static \u0275fac=function(e){return new(e||l)(P(F))};static \u0275cmp=D({type:l,selectors:[["app-roster"]],inputs:{teamId:"teamId"},decls:18,vars:5,consts:[["viewMode",""],[1,"card","mt-3"],[1,"card-header"],[1,"mb-0"],[1,"card-body"],[1,"row","g-2","mb-3",3,"ngSubmit"],[1,"col-md-4"],["name","name","placeholder","Player Name","required","",1,"form-control",3,"ngModelChange","ngModel"],["name","position","placeholder","Position","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-md-2"],["type","number","name","number","placeholder","Number","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-success","w-100"],[1,"list-group"],["class","list-group-item",4,"ngFor","ngForOf"],["class","text-center mt-3",4,"ngIf"],[1,"list-group-item"],[4,"ngIf","ngIfElse"],[1,"row","g-2","align-items-center"],["name","editName",1,"form-control",3,"ngModelChange","ngModel"],["name","editPosition",1,"form-control",3,"ngModelChange","ngModel"],["type","number","name","editNumber",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-md-2","d-flex","gap-1"],[1,"btn","btn-success","btn-sm","w-50",3,"click"],[1,"btn","btn-secondary","btn-sm","w-50",3,"click"],[1,"d-flex","justify-content-between","align-items-center"],[1,"d-flex","gap-2"],[1,"btn","btn-sm","btn-outline-primary",3,"click"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"text-center","mt-3"],[1,"btn","btn-outline-secondary","btn-sm",3,"click"]],template:function(e,t){e&1&&(a(0,"div",1)(1,"div",2)(2,"h6",3),s(3,"Team Roster"),r()(),a(4,"div",4)(5,"form",5),_("ngSubmit",function(){return t.addPlayer()}),a(6,"div",6)(7,"input",7),y("ngModelChange",function(o){return f(t.name,o)||(t.name=o),o}),r()(),a(8,"div",6)(9,"input",8),y("ngModelChange",function(o){return f(t.position,o)||(t.position=o),o}),r()(),a(10,"div",9)(11,"input",10),y("ngModelChange",function(o){return f(t.number,o)||(t.number=o),o}),r()(),a(12,"div",9)(13,"button",11),s(14,"Add"),r()()(),a(15,"ul",12),b(16,se,4,2,"li",13),r(),b(17,le,3,0,"div",14),r()()),e&2&&(m(7),g("ngModel",t.name),m(2),g("ngModel",t.position),m(2),g("ngModel",t.number),m(5),h("ngForOf",t.players),m(),h("ngIf",t.lastPlayerDoc))},dependencies:[k,V,R,U,G,L,Z,z,A,H,j,Q],encapsulation:2})};function me(l,n){if(l&1){let e=C();a(0,"button",15),_("click",function(){c(e);let i=d();return p(i.cancelEdit())}),s(1,"Cancel"),r()}}function de(l,n){if(l&1&&K(0,"app-roster",26),l&2){let e=d().$implicit;h("teamId",e.id)}}function ce(l,n){if(l&1){let e=C();a(0,"div",16)(1,"div",17)(2,"h5",18),s(3),r(),a(4,"p",19)(5,"strong"),s(6,"Sport:"),r(),s(7),r(),a(8,"p",19)(9,"strong"),s(10,"City:"),r(),s(11),r(),a(12,"div",20)(13,"button",21),_("click",function(){let i=c(e).$implicit,o=d();return p(o.startEdit(i))}),s(14,"Edit"),r(),a(15,"button",22),_("click",function(){let i=c(e).$implicit,o=d();return p(o.deleteTeam(i.id))}),s(16,"Delete"),r()(),a(17,"div",23)(18,"button",24),_("click",function(){let i=c(e).$implicit,o=d();return p(o.toggleRoster(i.id))}),s(19),r(),b(20,de,1,1,"app-roster",25),r()()()}if(l&2){let e=n.$implicit,t=d();m(3),N(e.name),m(4),x(" ",e.sport,""),m(4),x(" ",e.city,""),m(8),x(" ",t.selectedTeamId===e.id?"Hide Roster":"View Roster"," "),m(),h("ngIf",t.selectedTeamId===e.id)}}function pe(l,n){if(l&1){let e=C();a(0,"div",27)(1,"button",28),_("click",function(){c(e);let i=d();return p(i.loadNextPage())}),s(2,"Load More Teams"),r()()}}var $=class l{constructor(n){this.firestore=n;this.teamsRef=T(this.firestore,"teams")}name="";sport="";city="";editModeId=null;selectedTeamId=null;teams=[];lastTeamDoc=null;pageSize=5;teamsRef;ngOnInit(){return u(this,null,function*(){yield this.loadTeams()})}loadTeams(){return u(this,null,function*(){let n=E(this.teamsRef,I("name"),S(this.pageSize)),e=yield v(n);this.teams=e.docs.map(t=>w({id:t.id},t.data())),this.lastTeamDoc=e.docs[e.docs.length-1]||null})}loadNextPage(){return u(this,null,function*(){if(!this.lastTeamDoc)return;let n=E(this.teamsRef,I("name"),B(this.lastTeamDoc),S(this.pageSize)),e=yield v(n),t=e.docs.map(i=>w({id:i.id},i.data()));this.teams=[...this.teams,...t],this.lastTeamDoc=e.docs[e.docs.length-1]||null})}addTeam(){return u(this,null,function*(){if(!this.name||!this.sport||!this.city){alert("Please fill in all fields");return}let n={name:this.name,sport:this.sport,city:this.city};yield W(this.teamsRef,n),this.clearForm(),yield this.loadTeams()})}startEdit(n){this.editModeId=n.id,this.name=n.name,this.sport=n.sport,this.city=n.city}updateTeam(){return u(this,null,function*(){if(!this.editModeId)return;let n=M(this.firestore,`teams/${this.editModeId}`);yield O(n,{name:this.name,sport:this.sport,city:this.city}),this.clearForm(),yield this.loadTeams()})}deleteTeam(n){return u(this,null,function*(){let e=M(this.firestore,`teams/${n}`);yield q(e),yield this.loadTeams()})}cancelEdit(){this.clearForm()}clearForm(){this.name="",this.sport="",this.city="",this.editModeId=null}toggleRoster(n){this.selectedTeamId=this.selectedTeamId===n?null:n}static \u0275fac=function(e){return new(e||l)(P(F))};static \u0275cmp=D({type:l,selectors:[["app-teams"]],decls:24,vars:7,consts:[[1,"container","mt-5"],[1,"text-center","mb-4"],[1,"mb-4",3,"ngSubmit"],[1,"row","g-3","align-items-end"],[1,"col-md-4"],[1,"form-label"],["type","text","name","name","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","sport","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","city","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-12","text-center","mt-3"],["type","submit",1,"btn","btn-primary","me-2"],["type","button","class","btn btn-secondary",3,"click",4,"ngIf"],[1,"d-flex","flex-column","gap-4"],["class","card shadow-sm",4,"ngFor","ngForOf"],["class","text-center mt-4",4,"ngIf"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"card","shadow-sm"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"mt-3","text-end"],[1,"btn","btn-warning","btn-sm","me-2",3,"click"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"mt-3"],[1,"btn","btn-outline-primary","btn-sm",3,"click"],[3,"teamId",4,"ngIf"],[3,"teamId"],[1,"text-center","mt-4"],[1,"btn","btn-outline-primary",3,"click"]],template:function(e,t){e&1&&(a(0,"div",0)(1,"h2",1),s(2," Teams"),r(),a(3,"form",2),_("ngSubmit",function(){return t.editModeId?t.updateTeam():t.addTeam()}),a(4,"div",3)(5,"div",4)(6,"label",5),s(7,"Team Name"),r(),a(8,"input",6),y("ngModelChange",function(o){return f(t.name,o)||(t.name=o),o}),r()(),a(9,"div",4)(10,"label",5),s(11,"Sport"),r(),a(12,"input",7),y("ngModelChange",function(o){return f(t.sport,o)||(t.sport=o),o}),r()(),a(13,"div",4)(14,"label",5),s(15,"City"),r(),a(16,"input",8),y("ngModelChange",function(o){return f(t.city,o)||(t.city=o),o}),r()(),a(17,"div",9)(18,"button",10),s(19),r(),b(20,me,2,0,"button",11),r()()(),a(21,"div",12),b(22,ce,21,5,"div",13),r(),b(23,pe,3,0,"div",14),r()),e&2&&(m(8),g("ngModel",t.name),m(4),g("ngModel",t.sport),m(4),g("ngModel",t.city),m(3),x(" ",t.editModeId?"Update Team":"Add Team"," "),m(),h("ngIf",t.editModeId),m(2),h("ngForOf",t.teams),m(),h("ngIf",t.lastTeamDoc))},dependencies:[k,V,R,U,G,L,z,A,H,j,Q,J],styles:["[_nghost-%COMP%]{display:block;padding-top:70px;position:relative;z-index:1}"]})};export{$ as TeamsComponent};
